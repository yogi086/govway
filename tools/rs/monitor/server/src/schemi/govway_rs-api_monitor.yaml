openapi: 3.0.0
servers: []
info:
  description: Servizi per il monitoraggio di GovWay
  version: 1.0.0
  title: GovWay Monitor API
  contact:
    email: info@link.it
  license:
    name: GPL v3.0
    url: 'https://www.gnu.org/licenses/gpl-3.0.txt'
tags:
  - name: Monitoraggio
    description: >-
      Fornisce operazioni che consentono di recuperare i dettagli diagnostici
      delle transazioni e degli eventi occorsi su GovWay
  - name: Reportistica
    description: >-
      Fornisce operazioni che consentono di recuperare i report statistici
      riguardanti le transazioni gestite su GovWay
paths:
  
  # Transazioni
  
  /monitoraggio/transazioni:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
 
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base ai parametri di uso più
        comune
      operationId: findAllTransazioniBySimpleSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base a parametri di filtro di uso più comune
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: 'govway_core.yaml#/components/parameters/data_inizio'
        - $ref: 'govway_core.yaml#/components/parameters/data_fine'
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'
      responses:
        200:
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
        
    post:
      tags:
        - Monitoraggio
      summary: Ricerca completa delle transazioni per intervallo temporale
      operationId: findAllTransazioniByFullSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        limitando i risultati di ricerca ad un intervallo di date
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaIntervalloTemporale'
      responses:
        200:
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /monitoraggio/transazioni/id_applicativo:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
      
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base all'identificativo
        applicativo
      operationId: findAllTransazioniByIdApplicativoSimpleSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo applicativo e i parametri di
        filtro di uso più comune
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: 'govway_core.yaml#/components/parameters/data_inizio'
        - $ref: 'govway_core.yaml#/components/parameters/data_fine'
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/id_correlazione_applicativa'
        - $ref: 'govway_core.yaml#/components/parameters/ricerca_esatta'
        - $ref: 'govway_core.yaml#/components/parameters/case_sensitive'          
      responses:
        200:
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
          - Monitoraggio
      summary: >-
        Ricerca completa delle transazioni in base all'identificativo
        applicativo
      operationId: findAllTransazioniByIdApplicativoFullSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo applicativo e i parametri di
        filtro completi
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaIdApplicativo'
      responses:
        200:
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /monitoraggio/transazioni/id_messaggio:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
  
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base all'identificativo
        messaggio
      operationId: findAllTransazioniByIdMessaggio
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo messaggio
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: '#/components/parameters/tipo_messaggio'
        - $ref: '#/components/parameters/id_messaggio'

      responses:
        200:
          description: dettaglio transazione restituito correttamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /monitoraggio/transazioni/{id}:
    get:
      tags:
        - Monitoraggio
      summary: Dettaglio della transazione
      operationId: getTransazione
      description: Questa operazione consente di ottenere il dettaglio di una transazione
      parameters:
        - $ref: '#/components/parameters/id_transazione'
      
      responses:
        200:
          description: dettaglio transazione restituito correttamente
          content:
            application/json:
              schema:
                $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExt'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  # Eventi

  /monitoraggio/eventi:
  
    get:
      tags:
        - Monitoraggio
      summary:
        Ricerca di Eventi
      description: >-
        Questa operazione consente di effettuare una ricerca nell'archivio degli eventi
        specificando i criteri di filtraggio
      operationId: findAllEventi
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"
        - $ref: "#/components/parameters/severita"
        - $ref: "#/components/parameters/tipo_evento"
        - $ref: "#/components/parameters/codice_evento"
        - $ref: "#/components/parameters/origine_evento"
        - $ref: "govway_core.yaml#/components/parameters/ricerca_esatta"
        - $ref: "govway_core.yaml#/components/parameters/case_sensitive"
      responses:
        200:
          description: Ricerca eventi completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaEventi'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

  /monitoraggio/eventi/{id}:
    get:
      tags:
        - Monitoraggio
      summary: Dettaglio di un evento
      operationId: getEvento
      description: >-
        Permette di recuperare il dettaglio di un evento in base al suo identificativo

      parameters:
        - $ref: '#/components/parameters/id_evento_path'
      responses:
        200:
          description: Recupero evento completato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evento'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'



  # Statistiche

  /reportistica/analisi-statistica/distribuzione-temporale:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
      
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento temporale per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneTemporaleBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per andamento temporale esportandolo nei formati più comuni
        
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento temporale per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneTemporaleByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        per andamento temporale esportandolo nei formati più comuni 
        
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaAndamentoTemporale'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-esiti:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento esiti per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneEsitiBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per andamento esiti esportandolo nei formati più comuni
        
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento esiti per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneEsitiByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        per andamento esiti esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneEsiti'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-soggetto-remoto:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per soggetto remoto per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneSoggettoRemotoBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per soggetto remoto esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico raggruppato per soggetto remoto per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneSoggettoRemotoByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per soggetto remoto esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneSoggettoRemoto'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-soggetto-locale:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      # Non ci vuole essendo la distribuzione per soggetto locale: - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per soggetto locale per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneSoggettoLocaleBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per soggetto locale esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico raggruppato per soggetto locale per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneSoggettoLocaleByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per soggetto locale esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneSoggettoLocale'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-api:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per API utilizzando una ricerca semplice
      operationId: getReportDistribuzioneApiBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        organizzato per API esportandolo nei formati più comuni
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera per mezzo di una ricerca articolata, un report statistico raggruppato per servizi
      operationId: getReportDistribuzioneApiByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggrupato per servizi esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApi'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-azione:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Azioni utilizzando una ricerca semplice
      operationId: getReportDistribuzioneAzioneBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per azione esportandolo nei formati più comuni
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
    
    post:
      tags:
        - Reportistica
      summary: Genera un report statistico distribuito per azione utilizzando una ricerca articolata
      operationId: getReportDistribuzioneAzioneByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato distribuito per azione ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneAzione'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-applicativo:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Applicativi utilizzando una ricerca semplice
      operationId: getReportDistribuzioneApplicativoBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per applicativo esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
    
    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per applicativo utilizzando una ricerca articolata
      operationId: getReportDistribuzioneApplicativoByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per applicativo ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-id-autenticato:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Identificativo Autenticato utilizzando una ricerca semplice
      operationId: getReportDistribuzioneIdAutenticatoBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per identificativo autenticato esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per identificativo autenticato utilizzando una ricerca articolata
      operationId: getReportDistribuzioneIdAutenticatoByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per identificativo autenticato ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-token-info:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato organizzato per Token Info utilizzando una ricerca semplice
      operationId: getReportDistribuzioneTokenInfoBySimpleSearch
      description: >-
        Consente di generare un report raggruppato secondo un claim del token per mezzo di una ricerca semplice

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/claim'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Token Info
      operationId: getReportDistribuzioneTokenInfoByFullSearch
      description: >-
        Consente di generare un report raggruppato secondo un claim del token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneTokenInfo'

      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
          
  /reportistica/analisi-statistica/distribuzione-indirizzo-ip:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato organizzato per Indirizzo IP utilizzando una ricerca semplice
      operationId: getReportDistribuzioneIndirizzoIPBySimpleSearch
      description: >-
        Consente di generare un report degli indirizzo IP per mezzo di una ricerca semplice

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Indirizzi IP
      operationId: getReportDistribuzioneIndirizzoIPByFullSearch
      description: >-
        Consente di generare un report degli indirizzo IP
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'

      responses:
        200:
          $ref: '#/components/responses/200ReportStatistico'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
          


  # Reportistica Configurazione
  
  /reportistica/configurazione-api/riepilogo:   # Pannellino di sinistra non filtrato, uguale sia per erogazione che fruizione
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Ottieni le informazioni generali sulle api e servizi di un soggetto
      description: >-
        Restituisce il numero e tipo di api che coinvolgono il soggetto, e un riepilogo del registro
        circa i soggetti e gli applicativi registrati.
      operationId: getRiepologoConfigurazioni
      responses:
        200:
          description: Riepilogo ottenuto con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riepilogo'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
      
      
  /reportistica/configurazione-api/riepilogo/api:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Ottieni le informazioni generali sulle implementazioni di un Api
      description: >-
        Recupera le informazioni generali di una Api, come il nome e il numero di erogazioni e fruizioni registrate per esso
      parameters:
        - $ref: '#/components/parameters/tipo_transazione_config'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio_obbligatorio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
      operationId: getRiepilogoApi
      responses:
        200:
          description: Informazioni sulla API ottenute con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoImplementazioneApi'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/configurazione-api:  # Lista
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica 
      summary: Consente di recuperare l'elenco delle erogazioni o fruizioni che coinvolgono il soggetto scelto
      operationId: getConfigurazioneApi
      description: >-
        Ricerca le erogazioni e fruizioni registrate sul sistema
      parameters:
        - $ref: '#/components/parameters/tipo_transazione_config'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
      responses:
          200:
            description: Riepilogo ottenuto con successo
            content: 
              application/json:
                schema:
                  $ref: '#/components/schemas/ListaRiepilogoApi'
          400:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
          401:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
          403:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
          404:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
          429:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
          503:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
          default:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/configurazione-api/esporta:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
  
    get:
      tags:
        - Reportistica
      summary: Recupera la configurazione di un servizio
      operationId: exportConfigurazioneApiBySimpleSearch
      description: >-
        Consente di recuperare la configurazione di un servizio esportandola in formato csv
      parameters:
        - $ref: '#/components/parameters/tipo_transazione_config'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
      responses:
        200:
          $ref: '#/components/responses/200ReportConfigurazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'    
      
    post:
      tags:
        - Reportistica
      summary: Recupera la configurazione di un servizio
      operationId: exportConfigurazioneApiByFullSearch
      description: >-
        Consente di recuperare la configurazione di un servizio esportandola in formato csv
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaConfigurazioneApi'
      
      responses:
        200:
          $ref: '#/components/responses/200ReportConfigurazioni'
        400:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        401:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        403:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        404:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        429:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        503:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
        
components:

  responses:
  
    200ReportStatistico:
      description: Report statistico generato correttamente
      content:
        text/csv:
          schema:
            type: string
            format: byte
        application/pdf:
          schema:
            type: string
            format: byte
        application/vnd.ms-excel:
          schema:
            type: string
            format: byte
        text/xml:
          schema:
            type: string
            format: byte
        application/json:
          schema:
            type: string
            format: byte

    200ReportConfigurazioni:
      description: Report delle configurazioni generato correttamente
      content:
        text/csv:
          schema:
            type: string
            format: byte

  parameters:

    # Dati Identificativi nel path

    id_transazione:
      in: path
      name: id
      description: identificativo della transazione
      required: true
      schema:
        $ref: 'govway_trace.yaml#/components/schemas/TransazioneId'

    id_evento_path:
      in: path
      name: id
      description: L'identificativo dell'evento da recuperare
      required: true
      schema:
        type: integer
        format: int64



    # Criteri di ricerca obbligatori nella query

    tipo_transazione:
      in: query
      name: tipo
      description: La tipologia (erogazione\fruizione) del servizio
      required: true
      schema:
        $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaRuoloTransazioneEnum'
        
    tipo_transazione_config:
      in: query
      name: tipo
      description: La tipologia (erogazione\fruizione) del servizio
      required: true
      schema:
        $ref: 'govway_trace.yaml#/components/schemas/TransazioneRuoloEnum'
        
    id_correlazione_applicativa:
      in: query
      name: id_applicativo
      description: l'identificativo di correlazione applicativa della richiesta o della risposta
      required: true
      schema:
        type: string

    id_messaggio:
      in: query
      name: id
      required: true
      description: L'identificativo del messaggio
      schema:
        type: string      

    tipo_messaggio:
      in: query
      name: tipo_messaggio
      required: true
      description: "Distingue se l'identificativo del messaggio è relativo ad una richiesta o una risposta"
      schema:
        $ref: "#/components/schemas/TipoMessaggioEnum"


    # Criteri di ricerca opzionali nella query  

    soggetto_remoto:
      in: query
      name: soggetto_remoto
      description: >-
        Il soggetto remoto coinvolto nella transazione, ovvero il fruitore in
        caso di erogazione, o l'erogatore in caso di fruizione
      required: false
      schema:
        $ref: 'govway_core.yaml#/components/schemas/SimpleName'
       
    soggetto_erogatore:
      in: query
      name: soggetto_erogatore
      description: >-
        Il soggetto erogatore di una API
      required: false
      schema:
        $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        
    id_cluster: 
      in: query
      name: id_cluster 
      description: Identificativo del nodo su cui e' stata emessa la transazione
      required: false
      schema:
        type: string

    esito_transazione:
      in: query
      name: esito
      description: >-
        "Indica come sono state gestite le transazioni (ok: completate con
        successo, error: fallite, fault: fault applicativo)" 
      schema:
        $ref: '#/components/schemas/EsitoTransazioneSimpleSearchEnum'
      required: false

    severita:
      in: query
      name: severita
      description: Indica il livello di severità con il quale l'evento è stato registrato nel sistema
      required: false
      schema:
        $ref: 'govway_trace-ext.yaml#/components/schemas/DiagnosticoSeveritaEnum'

    origine_evento:
      in: query
      name: origine
      description: attore che ha provocato l'evento (es. nodo di un cluster)
      required: false
      schema:
        type: string

    codice_evento:
      in: query
      name: codice
      description: codice dell'evento
      required: false
      schema:
        type: string

    tipo_evento:
      in: query
      name: tipo
      description: tipo di evento (es. rateLimiting)
      required: false
      schema:
        type: string


    # Criteri di generazione report nella query  
        
    formato_report:
      in: query
      name: formato_report
      description: Indica la modalità di esportazione (csv, pdf...) del report statistico
      schema: 
        $ref: '#/components/schemas/FormatoReportEnum'
      required: true

    unita_tempo_report:
      in: query
      name: unita_tempo
      description: L'unità di tempo con cui visualizzare i report
      schema:
        $ref: '#/components/schemas/UnitaTempoReportEnum'
      required: false

    tipo_report:
      in: query
      name: tipo_report
      description: Indica il tipo di grafico da voler visualizzare per un dato report statistico
      schema:
        $ref: "#/components/schemas/TipoReportEnum"
      required: false
      
    tipo_informazione_report:
      in: query
      name: tipo_informazione_report
      description: Specifica l'informazione da visualizzare nel report
      schema:
        $ref: '#/components/schemas/TipoInformazioneReportEnum'
      required: false
      
    claim:
      in: query
      name: claim
      description: Specifica il claim che deve essere presente nel jwt di una transazione
      schema:
        $ref: "govway_core.yaml#/components/schemas/TokenClaimEnum"
      required: true

 
  schemas:

    # Transazioni

    ListaTransazioni:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/ListaSenzaTotale'
        - type: object
          required:
            - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/ItemTransazione'

    ItemTransazione:
      type: object
      allOf:
        - $ref: 'govway_trace.yaml#/components/schemas/TransazioneBase'
        - $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtTipo'
        - type: object      
          required:
            - data
          properties:
            data:
              type: string
              format: date-time
              example: '2017-07-21T17:32:28Z'
            latenza_servizio:
              type: integer
              format: int64
              example: 8
            latenza_totale:
              type: integer
              format: int64
              example: 20
            richiesta:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtDettaglioRichiestaBase'
            risposta:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtDettaglioRispostaBase'
            api:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtInformazioniApiBase'
            mittente:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtInformazioniMittenteBase'


    # Eventi

    ListaEventi:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/ListaSenzaTotale'
        - type: object
          required:
            - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Evento'

    Evento:
      type: object
      properties:
        id:
          type: integer
          format: int64
        ora_registrazione:
          type: string
          format: date-time
          example: '2017-07-21T17:32:28Z'
        severita:
          $ref: 'govway_trace-ext.yaml#/components/schemas/DiagnosticoSeveritaEnum'
        tipo:
          type: string
        codice:
          type: string
        origine:
          type: string


    # Statistiche

    OpzioniGenerazioneReportBase:
      type: object
      required:
      - formato
      properties:
        formato:
          $ref: '#/components/schemas/FormatoReportEnum'
        tipo:
          $ref: '#/components/schemas/TipoReportEnum' 

    OpzioniGenerazioneReportMultiLine:
      type: object
      allOf:
        - $ref: '#/components/schemas/OpzioniGenerazioneReportBase'
        - type: object
          properties:  
            tipo_informazione:
              $ref: '#/components/schemas/TipoInformazioneReportMultiLine'

    OpzioniGenerazioneReport:
      type: object
      allOf:
        - $ref: '#/components/schemas/OpzioniGenerazioneReportBase'
        - type: object
          properties:  
            tipo_informazione:
              $ref: '#/components/schemas/TipoInformazioneReport'

    TipoInformazioneReport:
      type: object
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'
        valori:
          discriminator:
            propertyName: tipo
            mapping:
              occupazione_banda:  '#/components/schemas/OccupazioneBandaEnum' 
              tempo_medio_risposta: '#/components/schemas/TempoMedioRispostaEnum'
          oneOf:
            - $ref: '#/components/schemas/OccupazioneBandaEnum'  
            - $ref: '#/components/schemas/TempoMedioRispostaEnum'

    TipoInformazioneReportMultiLine:
      type: object
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'
        valori:
          discriminator:
            propertyName: tipo
            mapping:
              occupazione_banda:  '#/components/schemas/OccupazioneBandaTipi' 
              tempo_medio_risposta: '#/components/schemas/TempoMedioRispostaTipi'
          oneOf:
            - $ref: '#/components/schemas/OccupazioneBandaTipi'  
            - $ref: '#/components/schemas/TempoMedioRispostaTipi'

    OccupazioneBandaTipi:
      type: object
      properties:
        banda_complessiva:
          type: boolean
          default: true
        banda_interna:
          type: boolean
          default: false
        banda_esterna:
          type: boolean
          default: false

    TempoMedioRispostaTipi:
      type: object
      properties:
        latenza_totale:
          type: boolean
          default: true
        latenza_servizio:
          type: boolean
          default: false
        latenza_gateway:
          type: boolean
          default: false


    # Report Configurazioni

    Riepilogo:
      type: object
      required:
      - api
      - erogazioni
      - fruizioni
      - soggetti_dominio_interno
      - soggetti_dominio_esterno
      - applicativi
      properties:
        api:
          type: integer
          format: int32
          description: Il numero di api per cui il soggetto è referente
          example: 2
        soggetto:
          $ref: "govway_core.yaml#/components/schemas/SimpleName"
        erogazioni:
          type: integer
          format: int32
          description: Il numero di erogazioni del soggetto
          example: 2
        fruizioni:
          type: integer
          format: int32
          description: Il numero di fruizioni del soggetto
          example: 2
        soggetti_dominio_interno:
          type: integer
          format: int32
        soggetti_dominio_esterno:
          type: integer
          format: int32
        applicativi:
          type: integer
          format: int32

    InfoImplementazioneApi:
      type: object
      properties:
        nome: 
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        tipo: 
          $ref: 'govway_core.yaml#/components/schemas/Tipo'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'
        soggetto:
          $ref: "govway_core.yaml#/components/schemas/SimpleName"
        azioni:
          type: integer
          format: int32
          description: Il numero di azioni\risorse della api
          example: 20
        erogazioni:
          type: integer
          format: int32
          description: Il numero di erogazioni che implementano la api
          example: 2
        fruizioni:
          type: integer
          format: int32
          description: Il numero di fruizioni che implementano la api
          example: 2

    ListaRiepilogoApi:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/Lista'
        - type: object
          required:
            - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/RiepilogoApiItem'
      
    RiepilogoApiItem:
      type: object
      required:
        - erogatore
      properties:
        fruitore:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        erogatore:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        nome:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        tipo: 
          $ref: 'govway_core.yaml#/components/schemas/Tipo'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'



    # Ricerche Transazioni

    RicercaBaseTransazione:
      type: object
      required:
      - intervallo_temporale
      - tipo
      properties:
        offset:
          default: 0
          format: int32
          type: integer
        limit:
          format: int32
          type: integer
        sort:
          example: +name
          type: string
        intervallo_temporale:
          $ref: '#/components/schemas/FiltroTemporale'
        tipo:
          $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaRuoloTransazioneEnum'
        id_cluster:  
          description: >-
            Identificativo del nodo su cui e' stata emessa la transazione
          type: string
        tag:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        api:
          discriminator:
            propertyName: tipo
            mapping:
              erogazione: '#/components/schemas/FiltroErogazione'
              fruizione: '#/components/schemas/FiltroFruizione'
              qualsiasi: '#/components/schemas/FiltroQualsiasi'
          oneOf:
            - $ref: '#/components/schemas/FiltroErogazione'
            - $ref: '#/components/schemas/FiltroFruizione'
            - $ref: '#/components/schemas/FiltroQualsiasi'
        azione:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        esito:
          $ref: '#/components/schemas/FiltroEsito'
        evento:  
          description: >-
            Evento da ricercare per una transazione
          type: string
     
    RicercaIntervalloTemporale:
      type: object
      allOf:
        - $ref: '#/components/schemas/RicercaBaseTransazione'
        - type: object
          properties:
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazione'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazione'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'
              
    RicercaIdApplicativo:
      type: object
      allOf:
        - $ref: '#/components/schemas/RicercaBaseTransazione'
        - type: object
          required:
          - id_applicativo
          properties:
            id_applicativo:
              $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'


    # Ricerche Statistiche

    RicercaBaseStatistica:
      type: object
      required:
      - intervallo_temporale
      - tipo
      properties:
        unita_tempo:
          $ref: '#/components/schemas/UnitaTempoReportEnum'
        intervallo_temporale:
          $ref: '#/components/schemas/FiltroTemporale'
        tipo:
          $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaRuoloTransazioneEnum'
        tag:
          $ref: 'govway_core.yaml#/components/schemas/NCName'

    RicercaBaseStatisticaSoggetti:
      type: object
      allOf:
        - $ref: '#/components/schemas/RicercaBaseStatistica'
        - type: object
          properties:
            api:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroErogazione'
                  fruizione: '#/components/schemas/FiltroFruizione'
                  qualsiasi: '#/components/schemas/FiltroQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroErogazione'
                - $ref: '#/components/schemas/FiltroFruizione'
                - $ref: '#/components/schemas/FiltroQualsiasi'

    RicercaStatisticaAndamentoTemporale:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportMultiLine'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazione'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazione'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneEsiti:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazione'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazione'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'

    RicercaStatisticaDistribuzioneSoggettoRemoto:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatistica'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            api:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroApiBase'
                  fruizione: '#/components/schemas/FiltroFruizione'
                  qualsiasi: '#/components/schemas/FiltroApiBase'
              oneOf:
                - $ref: '#/components/schemas/FiltroApiBase'
                - $ref: '#/components/schemas/FiltroFruizione'
                - $ref: '#/components/schemas/FiltroApiBase'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazioneDistribuzioneSoggettoRemoto'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneDistribuzioneSoggettoRemoto'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneSoggettoLocale:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazione'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazione'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneApi:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatistica'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            soggetto_erogatore:
              discriminator:
                propertyName: tipo
                mapping:
                  fruizione: 'govway_core.yaml#/components/schemas/SimpleName'
              oneOf:
                - $ref: 'govway_core.yaml#/components/schemas/SimpleName'
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazione'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazione'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'
            esito:
              $ref: '#/components/schemas/FiltroEsito'
 
    RicercaStatisticaDistribuzioneAzione:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            mittente:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: '#/components/schemas/FiltroMittenteErogazione'
                  fruizione: '#/components/schemas/FiltroMittenteFruizione'
                  qualsiasi: '#/components/schemas/FiltroMittenteQualsiasi'
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazione'
                - $ref: '#/components/schemas/FiltroMittenteFruizione'
                - $ref: '#/components/schemas/FiltroMittenteQualsiasi'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneApplicativo:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    #RicercaStatisticaDistribuzioneIdAutenticato:
    #   type: object
    #   allOf:
    #    - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
    
    #RicercaStatisticaDistribuzioneIndirizzoIP:
    #   type: object
    #   allOf:
    #    - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'

    RicercaStatisticaDistribuzioneTokenInfo:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
        - type: object
          required:
          - claim
          properties:
            claim:
              $ref: 'govway_core.yaml#/components/schemas/TokenClaimEnum'
            soggetto:
              discriminator:
                propertyName: tipo
                mapping:
                  erogazione: 'govway_core.yaml#/components/schemas/SimpleName'
              oneOf:
                - $ref: 'govway_core.yaml#/components/schemas/SimpleName'

    # Ricerche Report Configurazione

    RicercaConfigurazioneApi:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: 'govway_trace.yaml#/components/schemas/TransazioneRuoloEnum'
        api:
          discriminator:
            propertyName: tipo
            mapping:
              erogazione: '#/components/schemas/FiltroApiBase'
              fruizione: '#/components/schemas/FiltroFruizione'
          oneOf:
            - $ref: '#/components/schemas/FiltroApiBase'
            - $ref: '#/components/schemas/FiltroFruizione'


    # Filtri

    FiltroTemporale:
      type: object
      required:
        - data_inizio
        - data_fine
      properties:
        data_inizio:
          type: string
          format: date-time
          example: '2017-07-21T17:32:28Z'
        data_fine:
          type: string
          format: date-time
          example: '2017-07-21T17:32:28Z'

    FiltroApiBase:
      type: object
      required:
        - nome
      properties:
        tipo:
          $ref: 'govway_core.yaml#/components/schemas/Tipo'
        nome:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'

    FiltroFruizione:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroApiBase'
        - type: object
          required:
            - erogatore
          properties:
            erogatore:
              $ref: 'govway_core.yaml#/components/schemas/SimpleName'
    FiltroErogazione:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroApiBase'
    FiltroQualsiasi:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroApiBase'
           
    FiltroEsito:
      type: object
      required:
        - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/EsitoTransazioneFullSearchEnum'
        dettaglio:
          discriminator:
            propertyName: esito
            mapping:
              ok:             '#/components/schemas/DettaglioEsitoCode'
              error:          '#/components/schemas/DettaglioEsitoCode'
              error_or_fault: '#/components/schemas/DettaglioEsitoCode'
              personalizzato: '#/components/schemas/DettaglioEsitoList'
          oneOf: 
            - $ref: '#/components/schemas/DettaglioEsitoCode' 
            - $ref: '#/components/schemas/DettaglioEsitoList'
    DettaglioEsitoCode:
      type: integer
      format: int32   
    DettaglioEsitoList:
      type: array
      items:
          $ref: '#/components/schemas/DettaglioEsitoCode'

    FiltroMittenteFruizione:
      type: object
      description: >-
        Descrive le informazioni di filtraggio relative al mittente per la ricerca di transazioni relative a fruizioni di servizio
      properties:
        tipo: 
          $ref: '#/components/schemas/TipoFiltroMittenteFruizioneEnum'
        id:
          discriminator:
            propertyName: tipo
            mapping:
              applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' 
              identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'
              token_info: '#/components/schemas/FiltroMittenteFruizioneTokenClaim'
              indirizzo_ip: '#/components/schemas/FiltroMittenteIndirizzoIP'
          oneOf:
            - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo' 
            - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
            - $ref: '#/components/schemas/FiltroMittenteFruizioneTokenClaim'
            - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
    FiltroMittenteErogazione:
      type: object
      description: >-
        Descrive le informazioni di filtraggio relative al mittente per la ricerca di transazioni relative ad erogazioni di servizio
      properties:
        tipo: 
          $ref: '#/components/schemas/TipoFiltroMittenteErogazioneEnum'
        id:
          discriminator:
            propertyName: tipo
            mapping:
              soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
              applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' 
              identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'
              token_info: '#/components/schemas/FiltroMittenteErogazioneTokenClaim'
              indirizzo_ip: '#/components/schemas/FiltroMittenteIndirizzoIP'
          oneOf:
            - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto'
            - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo' 
            - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
            - $ref: '#/components/schemas/FiltroMittenteErogazioneTokenClaim'
            - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
    FiltroMittenteQualsiasi:
      type: object
      description: >-
        Descrive le informazioni di filtraggio relative al mittente per la ricerca di transazioni relative a fruizioni o erogazioni di servizio
      required:
        - tipo
        - id
      properties:
        tipo: 
          $ref: '#/components/schemas/TipoFiltroMittenteQualsiasiEnum'
        id:
          discriminator:
            propertyName: tipo
            mapping:
              identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'
              token_info: '#/components/schemas/FiltroMittenteFruizioneTokenClaim'
              indirizzo_ip: '#/components/schemas/FiltroMittenteIndirizzoIP'
          oneOf:
            - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
            - $ref: '#/components/schemas/FiltroMittenteFruizioneTokenClaim'
            - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
    FiltroMittenteErogazioneDistribuzioneSoggettoRemoto:
      type: object
      description: >-
        Descrive le informazioni di filtraggio relative al mittente per la ricerca di transazioni relative ad erogazioni di servizio
      properties:
        tipo: 
          $ref: '#/components/schemas/TipoFiltroMittenteErogazioneSoggettoRemotoEnum'
        id:
          discriminator:
            propertyName: tipo
            mapping: 
              identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'
              token_info: '#/components/schemas/FiltroMittenteErogazioneTokenClaim'
              indirizzo_ip: '#/components/schemas/FiltroMittenteIndirizzoIP'
          oneOf:
            - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
            - $ref: '#/components/schemas/FiltroMittenteErogazioneTokenClaim'
            - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
    FiltroMittenteErogazioneSoggetto:
      type: object
      required:
      - soggetto
      properties:
        soggetto:
         $ref: 'govway_core.yaml#/components/schemas/SimpleName'
    FiltroMittenteErogazioneApplicativo:
      type: object
      required:
      - soggetto
      - applicativo
      properties:
        soggetto:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        applicativo:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
    FiltroMittenteFruizioneApplicativo:
      type: object
      required:
      - applicativo
      properties:
        applicativo:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
    FiltroMittenteIdAutenticato:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'
        - type: object
          required:
            - autenticazione
          properties:
            autenticazione:
              $ref: '#/components/schemas/TipoFiltroMittenteIdentificativoAutenticatoEnum' 
    FiltroMittenteErogazioneTokenClaim:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroTokenClaimBase'
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'
        - type: object
          properties:
            soggetto:
              $ref: 'govway_core.yaml#/components/schemas/SimpleName'
    FiltroMittenteFruizioneTokenClaim:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroTokenClaimBase'
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'    
    FiltroTokenClaimBase:
      type: object
      required:
      - claim
      properties:
        claim:
          $ref: 'govway_core.yaml#/components/schemas/TokenClaimEnum'
    FiltroMittenteIndirizzoIP:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'
        - type: object
          properties:
            tipo:
              $ref: '#/components/schemas/TipoFiltroMittenteIndirizzoIPEnum' 
      
  

    # Enum
    EsitoTransazioneSimpleSearchEnum:
      type: string
      enum:
        - ok
        - fault
        - error
        - error_or_fault
    EsitoTransazioneFullSearchEnum:
      type: string
      enum:
        - ok
        - fault
        - error
        - error_or_fault
        - personalizzato
 
    TipoFiltroMittenteFruizioneEnum:
      type: string
      enum:
        - applicativo
        - identificativo_autenticato
        - token_info
        - indirizzo_ip
        
    TipoFiltroMittenteErogazioneEnum:
      type: string
      enum:
        - soggetto
        - applicativo
        - identificativo_autenticato
        - token_info
        - indirizzo_ip

    TipoFiltroMittenteErogazioneSoggettoRemotoEnum:
      type: string
      enum:
        - identificativo_autenticato
        - token_info
        - indirizzo_ip
        
    TipoFiltroMittenteQualsiasiEnum:
      type: string
      enum:
        - identificativo_autenticato
        - token_info
        - indirizzo_ip

    TipoFiltroMittenteIdentificativoAutenticatoEnum:
      type: string
      enum:
        - basic
        - ssl
        - principal
        
    TipoFiltroMittenteIndirizzoIPEnum:
      type: string
      enum:
        - client_ip
        - x_forwarded_for
        
    TipoMessaggioEnum:
      type: string
      enum:
        - richiesta
        - risposta
      example: richiesta
      
    TipoReportEnum:
      type: string
      enum:
        - line
        - pie
        - bar
        - table
      example: Line
      default: table
      
    FormatoReportEnum:
      type: string
      enum:
        - csv
        - pdf
        - xls
        - xml
        - json
      example: csv
      
    UnitaTempoReportEnum:
      type: string
      enum:
        - orario
        - giornaliero
        - settimanale
        - mensile
      example: orario
      default: giornaliero
      
    TipoInformazioneReportEnum:
      type: string
      enum:
        - numero_transazioni
        - occupazione_banda
        - tempo_medio_risposta
      example: numero_transazioni
      default: numero_transazioni

    OccupazioneBandaEnum:
      type: string
      enum:
        - banda_complessiva
        - banda_interna
        - banda_esterna
      example: banda_complessiva
      default: banda_complessiva
      
    TempoMedioRispostaEnum:
      type: string
      enum:
        - latenza_totale
        - latenza_servizio
        - latenza_gateway
      example: latenza_totale
      default: latenza_totale
